name: Update News Articles

on:
  schedule:
    - cron: '0 * * * *'  # ÙƒÙ„ Ø³Ø§Ø¹Ø©
  workflow_dispatch:

jobs:
  update:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ§¾ Ø³Ø­Ø¨ Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ù† GitHub
        uses: actions/checkout@v3

      - name: âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Git Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¢Ù„ÙŠ
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions@github.com'

      - name: ğŸ› ï¸ ØªØ´ØºÙŠÙ„ Ø³ÙƒØ±Ø¨Øª ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª
        run: |
          # Ø¶Ø¹ Ù‡Ù†Ø§ Ø³ÙƒØ±Ø¨Øª Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
          python scripts/update_articles.py

      - name: âœ… Ø¥Ø¶Ø§ÙØ© ÙˆØ­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª (Ø¥Ù† ÙˆØ¬Ø¯Øª)
        run: |
          git add .
          git commit -m "Update news articles [skip ci]" || echo "ğŸ”¸ Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª ØªØ³ØªØ¯Ø¹ÙŠ commit"

      - name: ğŸ”„ Ø³Ø­Ø¨ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ù† GitHub Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¹Ø§Ø±Ø¶
        run: |
          git pull origin main --rebase || echo "ğŸ”¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø³Ø­Ø¨ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø£Ùˆ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§Ø¬Ø© Ù„Ø°Ù„Ùƒ"

      - name: ğŸš€ Ø±ÙØ¹ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¥Ù„Ù‰ GitHub
        run: git push origin main
